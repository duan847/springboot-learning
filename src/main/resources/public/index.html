<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
    <title>看片</title>
    <link rel="stylesheet" href="css/app.css">
    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="layerslider/css/layerslider.css">
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body>
<div class="off-canvas-wrapper">
    <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper>
        <!--header-->
        <div class="off-canvas position-left light-off-menu" id="offCanvas" data-off-canvas>
            <div class="off-menu-close">
                <h3>导航</h3>
                <span data-toggle="offCanvas"><i class="fa fa-times"></i></span>
            </div>
            <ul class="vertical menu off-menu" data-responsive-menu="drilldown">
                <li class="has-submenu">
                    <a href="index.html"><i class="fa fa-home"></i>首页</a>
                </li>
            </ul>
            <div class="responsive-search">
                    <div class="input-group">
                        <input class="input-group-field" type="text" placeholder="电影名/电视剧名">
                        <div class="input-group-button" onclick="searchVideo(this);">
                            <button><i class="fa fa-search"></i></button>
                        </div>
                    </div>
            </div>
        </div>
        <div class="off-canvas-content" data-off-canvas-content>
            <header>
                <!--Navber-->
                <section id="navBar">
                    <nav class="sticky-container" data-sticky-container>
                        <div class="sticky topnav" data-sticky data-top-anchor="navBar"
                             data-btm-anchor="footer-bottom:bottom" data-margin-top="0" data-margin-bottom="0"
                             style="width: 100%; background: #fff;" data-sticky-on="large">
                            <div class="title-bar" data-responsive-toggle="beNav" data-hide-for="large">
                                <button class="menu-icon" type="button" data-toggle="offCanvas"></button>
                                <div class="title-bar-title"><img src="images/logo-small.png" alt="logo"></div>
                            </div>
                            <div class="show-for-large topbar-full clearfix" id="beNav" style="width: 100%;">
                                <div class="top-bar-left btn-toggle">
                                    <button type="button" data-toggle="offCanvas" class="secondary-button"><i
                                            class="fa fa-bars"></i></button>
                                </div>
                                <div class="top-bar-left toplogo">
                                    <ul class="menu">
                                        <li class="menu-text">
                                            <a href="index.html"><img src="images/logo-small.png" alt="logo"></a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="top-bar-left topnews">
                                    <div class="newsTicker">
                                        <i class="fa fa-video-camera"></i>
                                        <span>最新资讯</span>
                                        <ul id="newsBar">
                                            <li><a href="#">已收录60800个视频</a></li>
                                            <li><a href="#">今日更新2394个视频</a></li>
                                            <li><a href="#">复仇者联盟4：终结之战抢先看</a></li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="top-bar-left topsearch">
                                    <div class="search-bar-full">
                                        <div class="input-group">
                                            <input class="input-group-field" type="search"
                                                   placeholder="搜索 电影名/电视剧名">
                                            <div class="input-group-button icon-btn" onclick="searchVideo(this);">
                                                <input class="button" type="button" value="搜索"/>
                                                <i class="fa fa-search"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </nav>
                </section>
            </header><!-- End Header -->
            <!-- Premium Videos -->
            <section id="premium" class="premium-v4">
                <div id="owl-demo" class="owl-carousel carousel" data-car-length="4" data-items="4" data-loop="true"
                     data-nav="false" data-autoplay="true" data-autoplay-timeout="3000" data-dots="false"
                     data-auto-width="false" data-responsive-small="1" data-responsive-medium="2"
                     data-responsive-xlarge="5">
                </div>
            </section><!-- End Premium Videos -->
            <!-- Category -->
            <section id="category">
                <div class="row secBg">
                    <div class="large-12 columns">
                        <div class="column row">
                            <div class="heading category-heading clearfix">
                                <div class="cat-head pull-left">
                                    <i class="fa fa-folder-open"></i>
                                    <h4>视频分类</h4>
                                </div>
                                <div>
                                    <div class="navText pull-right show-for-large">
                                        <a class="prev secondary-button"><i class="fa fa-angle-left"></i></a>
                                        <a class="next secondary-button"><i class="fa fa-angle-right"></i></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- category carousel -->
                        <div id="owl-demo-cat" class="owl-carousel carousel" data-autoplay="true"
                             data-autoplay-timeout="4000" data-autoplay-hover="true" data-car-length="5" data-items="6"
                             data-dots="false" data-loop="true" data-auto-width="true" data-margin="10">

                        </div><!-- end carousel -->
                    </div>
                </div>
            </section><!-- End Category -->
            <!-- main content -->
            <section class="content">
                <!-- newest video -->
                <div class="main-heading">
                    <div class="row secBg padding-14">
                        <div class="medium-8 small-8 columns">
                            <div class="head-title">
                                <i class="fa fa-film"></i>
                                <h4>电影排行榜</h4>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row secBg">
                    <div class="large-12 columns">
                        <div class="row column head-text clearfix">
                            <p class="pull-left"> 电影排行榜: <span name="video_count">拼命加载中，请稍等...</span></p>
                            <div class="grid-system pull-right show-for-large">
                                <a class="secondary-button current grid-default" href="#"><i class="fa fa-th"></i></a>
                                <a class="secondary-button grid-medium" href="#"><i class="fa fa-th-large"></i></a>
                                <a class="secondary-button list" href="#"><i class="fa fa-th-list"></i></a>
                            </div>
                        </div>
                        <div class="tabs-content" data-tabs-content="newVideos">
                            <div class="tabs-panel is-active" id="new-all">
                                <div class="row list-group"></div>
                            </div>
                            <div class="tabs-panel" id="new-hd">
                                <div class="row list-group"></div>
                            </div>
                        </div>
                        <div class="text-center row-btn">
                            <a class="button radius" href="archives.html?order=year">查看所有</a>
                        </div>
                    </div>
                </div>
            </section>
        </div><!--end off canvas content-->
    </div><!--end off canvas wrapper inner-->
</div><!--end off canvas wrapper-->
<!-- script files -->
<script src="bower_components/jquery/dist/jquery.js"></script>
<script src="bower_components/what-input/what-input.js"></script>
<script src="bower_components/foundation-sites/dist/foundation.js"></script>
<script src="js/jquery.showmore.src.js" type="text/javascript"></script>
<script src="js/app.js"></script>
<script src="layerslider/js/greensock.js" type="text/javascript"></script>
<!-- LayerSlider script files -->
<script src="layerslider/js/layerslider.transitions.js" type="text/javascript"></script>
<script src="layerslider/js/layerslider.kreaturamedia.jquery.js" type="text/javascript"></script>
<script src="js/owl.carousel.min.js"></script>
<script src="js/inewsticker.js" type="text/javascript"></script>
<script src="js/jquery.kyco.easyshare.js" type="text/javascript"></script>
<script>

    //秒数转天时分秒
    function timeStamp( second_time ){
        if(!second_time){
            return "00:00:00";
        }
        var time = parseInt(second_time);
        if( parseInt(second_time )> 60){

            var second = parseInt(second_time) % 60;
            var min = parseInt(second_time / 60);
            time = "00:" + min + ":" + second;

            if( min > 60 ){
                min = parseInt(second_time / 60) % 60;
                var hour = parseInt( parseInt(second_time / 60) /60 );
                time = hour + ":" + min + ":" + second;
                // if( hour > 24 ){
                //     hour = parseInt( parseInt(second_time / 60) /60 ) % 24;
                //     var day = parseInt( parseInt( parseInt(second_time / 60) /60 ) / 24 );
                //     time = day + ":" + hour + ":" + min + ":" + second + ":";
                // }
            }
            var timeArr = time.split(":")
            return timeArr.map(function (item) {
                if(item.length == 0) {
                    return "00";
                }
                if(item.length == 1) {
                    return "0" + item;
                }
                return item;
            }).join(":")
        }else {
            return "00:00:"+time;
        }

    }

    jQuery(document).ready(function (jQuery) {
        jQuery.get("video/hot/page", {size: 10}, function (data) {
            var html = '';
            jQuery.each(data.records, function (i, item) {
                html += '<div class="item">' +
                    '                        <figure class="premium-img">' +
                    '                            <img src="' + item.cover + '" alt="carousel">' +
                    '                            <figcaption>' +
                    '                                <h5>' + item.name + '</h5>' +
                    '                                <p>' + item.score + '</p>' +
                    '                            </figcaption>' +
                    '                        </figure>' +
                    '                        <a href="single-video-v1.html?id=' + item.id + '" class="hover-posts" >' +
                    '                             <span><i class="fa fa-play"></i>播放</span>' +
                    '                        </a>' +
                    '                    </div>'
            })
            jQuery("#owl-demo").html(html);

            initStyle(jQuery("#owl-demo"));
        });


        jQuery.get("video/type/page", function (data) {
            var html = '';
            jQuery.each(data.records, function (i, item) {
                html += '<div class="item-cat item thumb-border">' +
                    '                                <figure class="premium-img">' +
                    '                                    <img src="http://placehold.it/185x130" alt="carousel">' +
                    '                                    <a href="archives.html?type='+item.id+'" class="hover-posts">' +
                    '                                        <span><i class="fa fa-search"></i></span>' +
                    '                                    </a>' +
                    '                                </figure>' +
                    '                                <h6><a href="archives.html?type='+item.id+'">' + item.value + '</a></h6>' +
                    '                            </div>';
            })
            jQuery("#owl-demo-cat").html(html);
            initStyle(jQuery("#owl-demo-cat"));
        });

        //最新视频
        jQuery.get("video/top/page", {"size": 12}, function (data) {
            var html = '';
            jQuery.each(data.records, function (i, item) {
                var timeLength = timeStamp(item.filmLength);
                html += '<div class="item large-3 medium-6 columns group-item-grid-default">' +
                    '                                        <div class="post thumb-border">' +
                    '                                            <div class="post-thumb">' +
                    '                                                <img src="' + item.cover + '" alt="new video">' +
                    '                                                <a href="single-video-v1.html?id=' + item.id + '" class="hover-posts">' +
                    '                                                    <span><i class="fa fa-play"></i>播放</span>' +
                    '                                                </a>' +
                    '                                                <div class="video-stats clearfix">' +
                    '                                                    <div class="thumb-stats pull-left">' +
                    '                                                        <h6>HD</h6>' +
                    '                                                    </div>' +
                    '                                                    <div class="thumb-stats pull-left">' +
                    '                                                        <i class="fa fa-heart"></i>' +
                    '                                                        <span>' + item.score + '</span>' +
                    '                                                    </div>' +
                    '                                                    <div class="thumb-stats pull-right">' +
                    '                                                        <span>'+timeLength+'</span>' +
                    '                                                    </div>' +
                    '                                                </div>' +
                    '                                            </div>' +
                    '                                            <div class="post-des">' +
                    '                                                <h6><a href="single-video-v1.html?id=' + item.id + '">' + item.name + '</a></h6>' +
                    '                                                <div class="post-stats clearfix">' +
                    '                                                    <p class="pull-left">' +
                    '                                                        <i class="fa fa-user"></i>' +
                    '                                                        <span><a href="#">admin</a></span>' +
                    '                                                    </p>' +
                    '                                                    <p class="pull-left">' +
                    '                                                        <i class="fa fa-clock-o"></i>' +
                    '                                                        <span>5 January 16</span>' +
                    '                                                    </p>' +
                    '                                                    <p class="pull-left">' +
                    '                                                        <i class="fa fa-eye"></i>' +
                    '                                                        <span>1,862K</span>' +
                    '                                                    </p>' +
                    '                                                </div>' +
                    '                                                <div class="post-summary">' +
                    '                                                    <p>' + item.synopsis + '</p>' +
                    '                                                </div>' +
                    '                                                <div class="post-button">' +
                    '                                                    <a href="single-video-v1.html?id=' + item.id + '" class="secondary-button"><i' +
                    '                                                            class="fa fa-play-circle"></i>播放</a>' +
                    '                                                </div>' +
                    '                                            </div>' +
                    '                                        </div>' +
                    '                                    </div>';
            })
            jQuery("#new-all div").html(html);
            jQuery("span[name=video_count]").html("共 " + data.total + " 个");
        });
    });

    function searchVideo(obj) {
        const text = jQuery(obj).prev().val();
        window.location.href = "archives.html?text=" + escape(text);
    }

    function initStyle(obj) {
        //Premium carousel
        jQuery(obj).each(function () {
            var owl = jQuery(this);
            jQuery(".prev").on('click', function () {
                jQuery(this).parent().parent().parent().parent().next().trigger('prev.owl.carousel');
            });

            jQuery(".next").on('click', function () {
                jQuery(this).parent().parent().parent().parent().next().trigger('next.owl.carousel');
            });
            var loopLength = owl.data('car-length');
            var divLength = jQuery(this).find("div.item").length;
            if (divLength > loopLength) {
                owl.owlCarousel({
                    dots: owl.data("dots"),
                    items: owl.data("items"),
                    slideBy: owl.data("slideby"),
                    center: owl.data("center"),
                    loop: owl.data("loop"),
                    margin: owl.data("margin"),
                    nav: owl.data("nav"),
                    autoplay: owl.data("autoplay"),
                    autoplayTimeout: owl.data("autoplay-timeout"),
                    autoWidth: owl.data("auto-width"),
                    autoHeight: owl.data("auto-Height"),
                    merge: owl.data("merge"),
                    responsive: {
                        0: {
                            items: owl.data("responsive-small"),
                            nav: false
                        },
                        600: {
                            items: owl.data("responsive-medium"),
                            nav: false
                        },
                        1000: {
                            items: owl.data("responsive-large"),
                            nav: false
                        },
                        1900: {
                            items: owl.data("responsive-xlarge"),
                            nav: false
                        }
                    }
                });

            } else {
                owl.owlCarousel({
                    dots: false,
                    items: owl.data("items"),
                    loop: false,
                    margin: owl.data("margin"),
                    autoplay: false,
                    autoplayHoverPause: true,
                    responsiveClass: true,
                    autoWidth: owl.data("auto-width"),
                    autoHeight: owl.data("auto-Height"),
                });
            }
        });
    }
</script>
</body>
</html>
